{% schema %}
{
  "name": "Banner Adaptable Total",
  "settings": [
    {
      "type": "image_picker",
      "id": "image_desktop",
      "label": "Imagen Escritorio (1920x800px)"
    },
    {
      "type": "image_picker",
      "id": "image_mobile",
      "label": "Imagen Móvil (800x1200px o similar)"
    },
    {
      "type": "url",
      "id": "link",
      "label": "Enlace del banner"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Ancho completo de pantalla",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Banner Adaptable Total"
    }
  ]
}
{% endschema %}

<style>
  .banner-adapt-container {
    width: 100%;
    margin: 0;
    padding: 0;
    line-height: 0; /* Elimina espacios extraños debajo de la imagen */
  }

  .banner-adapt-container img {
    width: 100%;
    height: auto; /* La altura se ajusta sola para NO recortar nada */
    display: block;
  }

  /* Si no quieres que sea ancho completo, limita el contenedor */
  .banner-adapt-container.boxed {
    max-width: 1200px;
    margin: 0 auto;
  }

  .mobile-hide {
    display: block;
  }
  .desktop-hide {
    display: none;
  }

  @media screen and (max-width: 749px) {
    .mobile-hide {
      display: none;
    }
    .desktop-hide {
      display: block;
    }
  }
</style>

<div class="banner-adapt-container {% unless section.settings.full_width %}boxed{% endunless %}">
  {% if section.settings.link != blank %}
    <a href="{{ section.settings.link }}">
  {% endif %}

    {% if section.settings.image_desktop != blank %}
      <img src="{{ section.settings.image_desktop | img_url: '2000x' }}" 
           alt="{{ section.settings.image_desktop.alt }}" 
           class="mobile-hide">
    {% else %}
      {{ 'lifestyle-1' | placeholder_svg_tag: 'mobile-hide' }}
    {% endif %}

    {% if section.settings.image_mobile != blank %}
      <img src="{{ section.settings.image_mobile | img_url: '800x' }}" 
           alt="{{ section.settings.image_mobile.alt }}" 
           class="desktop-hide">
    {% else %}
      {% comment %} Si no hay imagen móvil, usamos la de escritorio pero con ancho adaptable {% endcomment %}
      {% if section.settings.image_desktop != blank %}
        <img src="{{ section.settings.image_desktop | img_url: '800x' }}" class="desktop-hide">
      {% endif %}
    {% endif %}

  {% if section.settings.link != blank %}
    </a>
  {% endif %}
</div>